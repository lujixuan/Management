<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ljx.dao.UserDao">
	<!-- 目的：为DAO接口方法提供sql语句配置 -->
	<!-- 查询用户和密码进行登录 -->
	<select id="findByUserId" resultType="com.ljx.dto.UserDto" parameterType="String">

		select * from users where userId = #{userId}

	</select>
	
	<!-- 增加用户名和密码进行注册  -->
 	<insert id="registerByUserId" parameterType="com.ljx.dto.UserDto">
	    
 	    insert into users (userId,userPwd,userName)
 	    values
 	    (#{userId},#{userPwd},#{userName})
	
 	</insert>

	<select id="findTaskGraphData" resultType="com.ljx.dto.HomeTaskGraphDto">
		select count(case when t.taskFinishDate&lt;=#{finishDate} then 1 else null end) taskFinishNum,
		count(case when t.taskFinishDate&lt;=#{finishDate} then null else 1 end) taskUnfinishNum
		from tasks t
		where t.taskProjectId=#{projectId}
	</select>
	
</mapper>	